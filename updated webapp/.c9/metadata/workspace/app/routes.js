{"filter":false,"title":"routes.js","tooltip":"/app/routes.js","ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":49,"column":1},"end":{"row":49,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"6e95d179513319ba5def723164eda2bf78bf6e0f","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":49,"column":1},"action":"insert","lines":["module.exports = function(app, passport) {","","    // route for home page","    app.get('/', function(req, res) {","        res.render('index.ejs'); // load the index.ejs file","    });","","    // route for login form","    // route for processing the login form","    // route for signup form","    // route for processing the signup form","","    // route for showing the profile page","    app.get('/profile', isLoggedIn, function(req, res) {","        res.render('profile.ejs', {","            user : req.user // get the user out of session and pass to template","        });","    });","","    // =====================================","    // FACEBOOK ROUTES =====================","    // =====================================","    // route for facebook authentication and login","    app.get('/auth/facebook', passport.authenticate('facebook', { scope : 'email' }));","","    // handle the callback after facebook has authenticated the user","    app.get('/auth/facebook/callback',","        passport.authenticate('facebook', {","            successRedirect : '/profile',","            failureRedirect : '/'","        }));","","    // route for logging out","    app.get('/logout', function(req, res) {","        req.logout();","        res.redirect('/');","    });","","};","","// route middleware to make sure a user is logged in","function isLoggedIn(req, res, next) {","","    // if user is authenticated in the session, carry on","    if (req.isAuthenticated())","        return next();","","    // if they aren't redirect them to the home page","    res.redirect('/');","}"],"id":1}]]},"timestamp":1460167326000}